<!DOCTYPE html>
<html>
<head>
<title>Blind Chess</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!-- Custom Theme files -->
<link href="static/css/style.css" rel="stylesheet" type="text/css" media="all" />
<!-- //Custom Theme files -->
<!-- web font -->  
<link href="//fonts.googleapis.com/css?family=Roboto+Condensed:300,300i,400,400i,700,700i" rel="stylesheet">
<!-- //web font --> 
</head>
<body>
	<!-- main -->
	<div class="main">
		<h1>Blindfold Chess</h1>
			<div class="login-form agileits-right"> 
				<div class="agile-row">
					<h3>Next move</h3> 
					<div class="login-agileits-top"> 	
						<form action="/" method="post"> 
							<input type="text" class="name" name="move" required=""/>
						</form> 	
					</div>  
				</div>  
			</div> 
			<div class="clear"> </div>	 
		</div>	
	</div>	
<br /> <br />
    <h2>Previous moves: {{ moves }}</h2>

    <table width="" class='grid' cellspacing="" cellpadding="" border="">
      <tr>
        <td>a</td>
        <td>b</td>
        <td>c</td>
        <td>d</td>
      </tr>
      <tr>
        <td>e</td>
        <td>f</td>
        <td>g</td>
        <td>h</td>
      </tr>
      <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
        <td>4</td>
      </tr>
      <tr>
        <td>5</td>
        <td>6</td>
        <td>7</td>
        <td>8</td>
      </tr>
      <tr>
        <td>N</td>
        <td>B</td>
        <td>Q</td>
        <td>K</td>
      </tr>
      <tr>
        <td>Erase</td>
      </tr>
     </table>

<script type="text/javascript">
var lastClicked;
var grid = clickableGrid(6, 4, function(el, row, col, i) {
  console.log("You clicked on element:", el);
  console.log("You clicked on row:", row);
  console.log("You clicked on col:", col);
  console.log("You clicked on item #:", i);

  el.className = 'clicked';
  if (lastClicked) lastClicked.className = '';
  lastClicked = el;
});

document.body.appendChild(grid);

function clickableGrid(rows, cols, callback) {
  var i = 0;
  var grid = document.createElement('table');
  grid.className = 'grid';
  for (var r = 0; r < rows; ++r) {
    var tr = grid.appendChild(document.createElement('tr'));
    for (var c = 0; c < cols; ++c) {
      var cell = tr.appendChild(document.createElement('td'));
      cell.innerHTML = ++i;
      cell.addEventListener('click', (function(el, r, c, i) {
        return function() {
          callback(el, r, c, i);
        }
      })(cell, r, c, i), false);
    }
  }
  return grid;
}
                         
</script>
</body>
</html>
